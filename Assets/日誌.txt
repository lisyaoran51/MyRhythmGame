11/13
建player
寫CreateRulesetContainerWith

11/15
把control point加入PlayField -> ScrollingHitIbjectContainer -> SpeedAdjustment -> LinearScrollingContainer
寫StraightRulesetContainer .GetVisualRepresentation
speedAdjustmentContainer裡只有timingPoint，Column和PlayField裡才有hitObject

(timingPoint是輸入)
ScrollingRulesetContainer -> Load() -> applySpeedAdjustment ->  
playField.HitObjects.AddSpeedAdjustment -> CreateSpeedAdjustmentContainer(ControlPoint) -> LinearScrollingContainer


(hitObject是輸入)
RulesetContainer -> Load() -> loadObjects() -> GetVisualRepresentation( SheetMusic.HitObjects ) ->
PlayField.Add -> HitObjectContainer.Add


11/16
連接方法應該是
RulesetContainer.load() -> RulesetContainer.loadObjects -> ManiaPlayfield.Add(DrawableHitObject h) ->
	Column.Add(DrawableHitObject hitObject) -> ScrollingHitObjectContainer.Add(DrawableHitObject hitObject) ->
	adjustmentContainerAt(hitObject.HitObject.StartTime).Add(hitObject)

然後ManiaPlayField的建構子會AddNested(column)，每個Column都會得到所有的SpeedAdjustmentContainer

在ScrollingRulesetContainer的load()裡，applySpeedAdjustment時會
													playfield.NestedPlayfields.ForEach(p => applySpeedAdjustment(controlPoint, p));
													所以每個column都會有一個SpeedAdjustmentContainer

11/19
把newable寫成一new就會自動執行construct
開始寫load，要寫成一加入一個父物件，就會自動執行load

11/20
看完osu的dependency caontainer，它是把物件的hiarchy加入到自己(子物件)裡，每個物件都有一個map存每個class type的快取資料
如果要load的時候，會到map裡面尋找要load的parameter，如果沒有的話就去父物件找，一直recursive到找到或是沒有父物件

寫完loadable，接下來要把interface補起來

11/22
寫到child addable，要把load寫出來
走一遍程式，跳過converter
改到wheetmusic

11/23
寫完decoder，decoder應該是擺在selectsong那，先跳過
先寫converter
converter的運作方式：
RulesetContainer.converter.Convert(WorkingSheetmusic.Sheetmusic); ->						
	ConvertSheetmusic(new Sheetmusic(original)); ->												//SheetmusicConverter
		HitObjects = original.HitObjects.SelectMany(h => convert(h, original)).ToList() ->
			ConvertSheetmusic(original, sheetmusic) ->											//StraightSheetmusicConverter
				generateSpecific(original) ->
					SpecificSheetmusicPatternGenerator.Generate()								//SpecificSheetmusicPatternGenerator

寫完converter和proccessor
				

11/26
決定把view跟object分開，排版都delegate給view
把view寫個樣本，接下來要視著讓整個遊戲跑跑看，先把前一個load樂譜的Scene寫好
把import那邊寫好，現在要把sheetmusicManager加入Main中

11/28
把import順一遍，順到decode完蛋是忘了加path到info裡

11/29
現在是把ruleset寫在sheetmusic manager裡，之後應該寫成直接讀檔案來輸入ruleset
順道rulesetcontainer的loadobject那

12/7
hitobject的column是什麼時候設的?
TargetLineHeight要擺在哪?
順完
debug:沒有自動load
getmethod只有拿到null
getmethod要加上BindingFlags.NonPublic | BindingFlags.Instance，才讀的到private

為了讓loader傳送原本的screen，而不是把原本的screen裡面讀出來擺在自己身上，所以把screen改成可以
擺在loader身上的sttribute，方法是先將screen轉換成不繼承monobehavior的intangible，在擺入loader
到新的場景時再cache這個intangible screen

debug:在filereader的filename出錯

12/8
load以後的loader的screen不見了

12/13
把LinearScrollingContainer改成不管螢幕大小
把hitobjectcontainer的gameobject都去掉
bug: adjustmentcontainer是空的

12/14
run起來，要把drawablenot放到speedadjust裡

12/18
Scrolling HitObject Container的Speed Adjustment Containers是空的，要慢慢找出原因

12/20
會動了，但是輸出以後東西就都不見了
停在Child Addable的Add Child的invoke前面
結果是resource資料夾要整個複製過去build裡

12/22
https://www.alanzucconi.com/2015/10/07/how-to-integrate-arduino-with-unity/

2/27
要把高度改成根據按鍵的長度，減少高度，讓音符提早結束，並且傳送訊息給鋼琴，讓鋼琴開始發光
LinearScrollingContainer.Add可以改變高度
可以用Config Manager來改高度，但是要找個更好的方法，可能是透過遊戲設定來更改

遊戲設定在osu是擺在Ruleset.Mods裡，找找看有沒有別的方法
osu中的visible time range在各playfield中，太古漢mania是寫死，不過mania可以用gravity scrolling container重設音符的高度
先照mania寫

Ruleset container.apply mod -> mod.ApplyToRulesetContainer(this)

我把音符的高度擺在linear scrolling container裡，但是osu中應該不是擺那，

寫到StraightModFlowOut，要去working sheetmusic裡改mods

3/1
改變speed adjustment的內容，是ScrollingHitObjectContainer.AddSpeedAdjustment(SpeedAdjustment)的責任

apply "key w/ Light" Mod流程：
(1) Ruleset Container() -> Ruleset Container.apply mod() -> Straight Ruleset Container.??設定為這個模式
	-> ruleset container 去改 playfield 去改 Hit Obj Container 去改每一個 SpeedAdjustment
(2) Scrolling ruleset container.load() -> StraightPlayField.ApplySpeedAdjustment(every timing point)

改LinearScrollingContainer.Add來修改落下位置，修改落下位置寫好了，接下來要寫觸發
現在要先讀懂osu裡要怎麼到固定時間就產生特定圖按

